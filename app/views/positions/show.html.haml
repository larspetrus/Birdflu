.leftmenu= AlgSet.active.name
.leftmenu= link_to 'Main Page', positions_url
- if @position.has_mirror
  .leftmenu= link_to "Mirror - #{@position.mirror.display_name}", "#{@position.mirror_ll_code}"
- else
  .leftmenu Self mirrored
- if @position.has_inverse
  .leftmenu= link_to "Inverse - #{@position.inverse.display_name}", "#{@position.inverse_ll_code}"
- else
  .leftmenu Self inversed
.leftmenu= link_to 'Random Position', "#{Random.rand(3916) + 1}"

%hr{style: 'clear:both;'}

.right= render 'svg_cube', iconf: Icons::Oll.for(@position), size: 50
.right= render 'svg_cube', iconf: Icons::Ep.for(@position), size: 50
.right= render 'svg_cube', iconf: Icons::Eo.for(@position), size: 50
.right= render 'svg_cube', iconf: Icons::Cop.for(@position), size: 50

.center{style: "width: 200px; "}
  = render 'svg_cube', iconf: Icons::Big.new(@cube, Icons::Ep.for(@position).arrows + Icons::Cop.for(@position).arrows), size: 160, label: @position.display_name, add_class: 'big-icon'

.center{style: "width: 528px;"}
  %h4.top3 Top 3 Algs
  - @top_3.each do |t3|
    .roofpig.rp160{:'data-config' => "base=AD | alg=#{t3.moves} | flags=showalg #{t3.setup_moves}" }
      .name
        =t3.name

%hr{style: 'clear:both;'}

.center.alg_list_header
  =check_box_tag('raw', 'raw2', true)
  %label{for: 'raw'}
    Show Single Algs
  =check_box_tag('combo', 'combo2', true)
  %label{for: 'combo'}
    Show Combo Algs
  %br
  Shown: #{@page_size} of #{@position.alg_count}

%table.index
  %thead
    %th Speed
    %th Moves
    %th Name
    %th Alg
    %th Notes
  %tbody
  - @solution_order.each do |key|
    - @solutions[key].each_with_index do |alg, i|
      %tr{class: alg.filter_marker}
        %td= '%.2f' % alg.speed
        %td{class: [@position.is_optimal(alg) ? 'optimal' : nil, i > 0 ? 'copy' : nil]}= alg.length
        %td{class: alg.css_kind}= alg.name
        %td{class: [@top_3.include?(alg) ? 'top3' : nil, i > 0 ? 'copy' : nil]}= alg.moves
        %td
          - unless alg.oneAlg?
            = alg.mv_start
            %span.cancel1= alg.mv_cancel1
            %span.merged=  alg.mv_merged
            %span.cancel2= alg.mv_cancel2
            %span.alg2=    alg.mv_end
          - else
            = alg.specialness

%script ROOFPIG_CONF_AD = "solved=U-| hover=3 | speed=600"

:javascript
  function show_algs(kind, show) {
    if (show) {
      $('.' + kind).show();
    } else {
      $('.' + kind).hide();
    }
  }

  $('#raw, #combo').on('click', function() {
    show_algs($(this).prop("id"), $(this).is(":checked"))
  });
