.leftmenu
  =form_tag url_for(controller: 'positions', action: 'find_by_alg'), method: 'post', id: 'find_by_alg', remote: true do
    Find by Alg
    =text_field_tag "alg", nil, placeholder: 'fbrlud only' ,size: 30
    #find_by_alg_msg{style: "padding: 10px; display:none;"}

:javascript
  $('#find_by_alg').on('ajax:success', function(e, data, status, xhr) {
    var result = JSON.parse(xhr.responseText);
    if (result.ll_code) {
      window.location.href = '/positions/' + result.ll_code;
    } else {
      bad_alg_dialog(result.error || "We didn't even get an error!");
    }
  });

  function bad_alg_dialog(message) {
    $('#find_by_alg_msg').text(message);
    $('#find_by_alg_msg').dialog({
      width: '350px', title: 'Find by Alg problem', modal: true, closeOnEscape: true, dialogClass: 'lars-dialog'
    });
  };

  // Stop Roofpig from stealing key events:
  $('#alg').keydown(function(event) { event.stopPropagation(); });
  $('#alg').keyup(function(event)   { event.stopPropagation(); });
