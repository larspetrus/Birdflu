.algset_top
  =link_to('Birdflu', '/')
  =link_to('Algsets', alg_sets_path)

- if @login
  =link_to('New Algset', new_alg_set_path, class: 'show-pig', style: 'font-size: 14px;')
- else
  %div{style: 'font-size: 9px;'} (log in to create)
%p

%table.algsets
  %tr
    %th id
    %th name
    %th algs
    %th avg length
    %th avg speed
    %th coverage
    %th owner
    %th
    %th
    %th
  - @all_sets.each do |algset|
    %tr
      %td
        =algset.id
      %td
        =algset.menu_name
      %td
        =algset.algs.split(' ').count
      %td
        =fmt_avg_length(algset)
      %td
        =fmt_avg_speed(algset)
      %td
        =fmt_coverage(algset)
      %td
        =owner(algset)
      %td
        =link_to('show', alg_set_path(algset), class: 'show-pig')
      %td
        - if algset.editable_by_this_user
          =link_to('edit', edit_alg_set_path(algset), class: 'show-pig')
      %td
        - if algset.editable_by_this_user && (not algset.predefined)
          = link_to "Remove", algset, method: :delete, data: {confirm:"You Sure?"}, class: 'show-pig'

-if @to_compute.present?
  :javascript
    $.get("/alg_sets/compute/#{@to_compute}", function(data) {
      if (data.success) {
        location.reload();
      } else {
        console.log("/alg_sets/compute/#{@to_compute} failed: ", data.error);
      }
    });
